{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["function imageTemplate(image) {\n  let { largeImageURL, webformatURL, tags, likes, views, comments, downloads } =\n    image;\n  return `<li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\"></a>\n        <ul class=\"info-list\">\n          <li class=\"list-item\">\n            <h3>Likes</h3>\n            <p class=\"likes-js\">${likes}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Views</h3>\n            <p class=\"views-js\">${views}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Comments</h3>\n            <p class=\"comments-js\">${comments}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Downloads</h3>\n            <p class=\"downloads-js\">${downloads}</p>\n          </li>\n        </ul>\n    </li>`;\n}\n\nexport function imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n","import Axios from 'axios';\n\nconst API_KEY = '44366879-bfb1deb33845459b9a36e6118';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n});\n\nexport async function getImages(requestImage, page) {\n  const res = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: requestImage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  });\n  return res.data;\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { imagesTemplate } from './js/render-functions';\nimport { getImages } from './js/pixabay-api';\n\nimport imageURL from './img/error.svg';\n\nconst formElem = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.lds-roller');\nconst loadBtn = document.querySelector('.load-btn');\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet maxPage = 1;\nlet image = '';\nconst perPage = 15;\n\nformElem.addEventListener('submit', async e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  image = e.target.elements.input.value.trim();\n  if (image === '') {\n    infoMessage('Please enter the data for the request!', 'blue');\n    return;\n  }\n\n  page = 1;\n  showLoader();\n  hideLoadBtn();\n\n  try {\n    const data = await getImages(image, page);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    if (data.totalHits === 0) {\n      formElem.reset();\n      infoMessage(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'red'\n      );\n      hideLoader();\n      return;\n    }\n    const markup = imagesTemplate(data.hits);\n    gallery.innerHTML = markup;\n    lightBox.refresh();\n    updBtnStatus();\n  } catch (err) {\n    infoMessage('ERROR');\n  }\n\n  formElem.reset();\n  updBtnStatus();\n  hideLoader();\n});\n\n// =====================================================================================================\nloadBtn.addEventListener('click', async () => {\n  page++;\n  showLoader();\n  hideLoadBtn();\n\n  try {\n    const data = await getImages(image, page);\n    const markup = imagesTemplate(data.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightBox.refresh();\n    skipPreviousElem();\n  } catch (err) {\n    infoMessage('ERROR');\n  }\n  hideLoader();\n  updBtnStatus();\n});\n\n// =========================== Additional functions ===================================================\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showLoadBtn() {\n  loadBtn.classList.remove('hidden');\n}\n\nfunction hideLoadBtn() {\n  loadBtn.classList.add('hidden');\n}\n\nfunction updBtnStatus() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The End!',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction infoMessage(message, color) {\n  iziToast.error({\n    position: 'topRight',\n    maxWidth: '360px',\n    theme: 'dark',\n    messageColor: 'white',\n    iconUrl: imageURL,\n    message: message,\n    color: color,\n  });\n}\n\nfunction skipPreviousElem() {\n  const liElem = gallery.children[0];\n  const height = liElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["imageTemplate","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imagesTemplate","images","API_KEY","axios","Axios","getImages","requestImage","page","imageURL","formElem","gallery","loader","loadBtn","lightBox","SimpleLightbox","maxPage","perPage","e","infoMessage","showLoader","hideLoadBtn","data","hideLoader","markup","updBtnStatus","skipPreviousElem","showLoadBtn","iziToast","message","color","height"],"mappings":"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"}